<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM Element Details Highlighter</title>
    <style>
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            font-family: Arial, sans-serif;
        }

        .highlight {
            background-color: rgba(238, 238, 231, 0.5);
            border: 2px solid #e7d4b0; /* Orange border */
            border-radius: 2px; /* Rounded corners */
            transition: background-color 0.3s, border-color 0.3s; /* Smooth transition */
        }
    </style>
</head>
<body class="container">
<div>
    <div>
        div1
        <div>
            div2
            <div>
                div3
                <p>lorem ipsum <a href="#"> Test</a></p>
            </div>
        </div>
    </div>
</div>

<article>
    <p>
        The Disney movie <cite>The Little Mermaid</cite> was first released to
        theatres in 1989.
    </p>
    <aside>
        <p>The movie earned $87 million during its initial release.</p>
    </aside>
    <p>More info about the movieâ€¦</p>
</article>

<div>
    sfadsf
    Test
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script>
    $(document).ready(function () {
        var $body = $('body');
        var $highlight = $('.highlight');

        function getElementDetails(element) {
            var elementDetails = getElementDetailsRecursive(element);
            console.log(elementDetails);
        }

        function getElementDetailsRecursive(element) {
            var $element = $(element);
            var elementDetails = {
                tagName: element.tagName,
                id: element.id,
                class: $element.attr('class'),
                text: $element.text(), // Changed to text() to get the text content
                children: []
            };

            $element.children().each(function () {
                elementDetails.children.push(getElementDetailsRecursive(this));
            });

            return elementDetails;
        }

        $body.on('click', '*', function (event) {
            event.stopPropagation(); // Prevent event from bubbling up to parent elements
            getElementDetails(this);
        });

        $body.on('mouseenter', '*', function () {
            $highlight.removeClass('highlight');
            $(this).addClass('highlight');
        }).on('mouseleave', '*', function () {
            $(this).removeClass('highlight');
        });

        $body.on('click', function (event) {
            if (!$(event.target).closest('.highlight').length) {
                $highlight.removeClass('highlight');
            }
        });
    });
</script>

</body>
</html>
